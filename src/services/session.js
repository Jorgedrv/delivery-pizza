/*
 * %W% %E% Scotiabank Bank S.A
 *
 * Copyright (c) 2010-2018 Scotiabank Bank S.A, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information of Scotiabank
 * bank S.A, Inc. ('Confidential Information'). You shall not
 * disclose such Confidential Information and shall use it only in
 * accordance with the terms of the license agreement you entered into
 * with Scotiabank.
 *
 * SCOTIABANK MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF
 * THE SOFTWARE, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED
 * TO THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 * PARTICULAR PURPOSE, OR NON-INFRINGEMENT. SCOTIABANK SHALL NOT BE LIABLE FOR
 * ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR
 * DISTRIBUTING THIS SOFTWARE OR ITS DERIVATIVES.
 */

const SESSION_VAR = 'session';

const SESSION_DEFAULT = {'menu':[{'key':'M003000000000','description':'Transferencias y Pagos','type':'BOTH','services':[{'key':'M003002000000','description':'PAC','type':'BOTH','services':[{'key':'M003002001000','description':'Administración PAC','type':'BOTH','services':[],'short_description':'Adm PAC'},{'key':'S003002001008','description':'Suspensión de Pagos','type':'NO_MONEY','services':[],'short_description':'Suspension pagos'},{'key':'M003002003000','description':'Consultas','type':'BOTH','services':[],'short_description':'Consultas'}],'short_description':'PAC'},{'key':'M003002002000','description':'Cotizaciones Previsionales','type':'BOTH','services':[{'key':'S003002002001','description':'Pago Cotizaciones','type':'MONEY','services':[],'short_description':'Pago cotizaciones'}],'short_description':'Cotiza previsionales'},{'key':'M003001000000','description':'Transferencias','type':'BOTH','services':[{'key':'S003001001000','description':'Entre mis Productos','type':'MONEY','services':[],'short_description':'Entre productos'},{'key':'S003001002000','description':'A Terceros','type':'MONEY','services':[],'short_description':'A terceros'},{'key':'S003001003000','description':'Alto valor','type':'MONEY','services':[],'short_description':'Alto valor'},{'key':'S003001004000','description':'DVP','type':'MONEY','services':[],'short_description':'DVP'},{'key':'S003001005000','description':'Consulta de Pagos y Transferencias','type':'NO_MONEY','services':[],'short_description':'Cons pagos y tranf'},{'key':'S003001006000','description':'Administración Beneficiarios','type':'MONEY','services':[],'short_description':'Adm beneficiarios'}],'short_description':'Transferencias'}],'short_description':'Tranf y pagos'},{'key':'M001000000000','description':'Cuentas','type':'BOTH','services':[],'short_description':'Prod Cta Cte'},{'key':'M002000000000','description':'Tarjeta de Crédito','type':'BOTH','services':[{'key':'S002001000000','description':'Movimientos no Facturados','type':'NO_MONEY','services':[],'short_description':'Mov no facturados'},{'key':'M002002000000','description':'Estado de Cuentas','type':'NO_MONEY','services':[],'short_description':'Estado ctas'},{'key':'S002003000000','description':'Avance TC','type':'MONEY','services':[],'short_description':'Avance TC'},{'key':'S002004000000','description':'Pago Tarjeta de Crédito','type':'MONEY','services':[],'short_description':'Pago tarj cred'},{'key':'S002005000000','description':'Habilitación Compras On Line con Tarjeta','type':'MONEY','services':[],'short_description':'Habilitación Compra online'}],'short_description':'Tarj cred'},{'key':'M004000000000','description':'Cash Management','type':'BOTH','services':[{'key':'M004001000000','description':'Pagos Masivos','type':'BOTH','services':[{'key':'S004001001000','description':'Remuneraciones','type':'MONEY','services':[],'short_description':'Remuneraciones'},{'key':'S004001002000','description':'Multipagos','type':'MONEY','services':[],'short_description':'Multipagos'},{'key':'S004001003000','description':'Proveedores','type':'MONEY','services':[],'short_description':'Proveedores'},{'key':'S004001004000','description':'Rol Privado','type':'MONEY','services':[],'short_description':'Rol Privado'},{'key':'S004001005000','description':'Otros Pagos','type':'MONEY','services':[],'short_description':'Otros Pagos'},{'key':'S004001006000','description':'Nóminas mismo día','type':'MONEY','services':[],'short_description':'Nom mismo dia'},{'key':'M004001007000','description':'Consulta y rendiciones','type':'NO_MONEY','services':[],'short_description':'Cons rendic de nominas'},{'key':'M004001008000','description':'Administración Beneficiarios','type':'MONEY','services':[],'short_description':'Adm benef'}],'short_description':'Pagos masivos'},{'key':'M004002000000','description':'Recaudaciones','type':'NO_MONEY','services':[{'key':'S004002001000','description':'Cartera Conocida','type':'NO_MONEY','services':[],'short_description':'Cart conocida'},{'key':'S004002002000','description':'Consultas y Rendiciones','type':'NO_MONEY','services':[],'short_description':'Cons y rendiciones'},{'key':'S004002003000','description':'Consulta Cheques Devueltos','type':'NO_MONEY','services':[],'short_description':'Cons cheques devueltos'},{'key':'S004002004000','description':'Cartola Abono Recaudación','type':'NO_MONEY','services':[],'short_description':'Cart abono recauda'}],'short_description':'Recaudaciones'},{'key':'M004003000000','description':'PAC Multi/Mono Banco','type':'NO_MONEY','services':[{'key':'S004003001000','description':'Administración Nóminas PAC','type':'NO_MONEY','services':[],'short_description':'Adm nom PAC'}],'short_description':'PAC Multi/Mono banco'},{'key':'M004004000000','description':'Cobranza de Letras','type':'NO_MONEY','services':[{'key':'S004004001000','description':'Consultas','type':'NO_MONEY','services':[],'short_description':'Consultas'}],'short_description':'Cobranza letras'}],'short_description':'Cash management'},{'key':'M005000000000','description':'Comercio Exterior','type':'BOTH','services':[{'key':'M005002000000','description':'Compra/Venta de Divisas','type':'BOTH','services':[],'short_description':'Compra Venta divisas'},{'key':'S005003000000','description':'Nóminas Intercuentas Mismo Banco Comex','type':'MONEY','services':[],'short_description':'Nom interCtas mismo banco Comex'},{'key':'M005004000000','description':'Consulta Comex','type':'NO_MONEY','services':[],'short_description':'Cons operaciones Comex'},{'key':'S005005000000','description':'Orden de Pago Recibida','type':'NO_MONEY','services':[],'short_description':'Orden pago recibida'},{'key':'M005001000000','description':'Remesas al Exterior','type':'BOTH','services':[{'key':'S005001001000','description':'Compra Moneda On-line','type':'MONEY','services':[],'short_description':'Compra moneda online'},{'key':'S005001003000','description':'Nóminas','type':'NO_MONEY','services':[],'short_description':'Importar nominas'},{'key':'M005001009000','description':'Beneficiarios','type':'BOTH','services':[],'short_description':'Beneficiarios'}],'short_description':'Remesas al ext'},{'key':'M005006000000','description':'Carta Crédito Importación','type':'BOTH','services':[{'key':'S005006001000','description':'Apertura','type':'MONEY','services':[],'short_description':'Apertura'},{'key':'S005006002000','description':'Apertura con Carga de Archivo','type':'MONEY','services':[],'short_description':'Apertura c/carga archivo'},{'key':'S005006003000','description':'Modificación','type':'MONEY','services':[],'short_description':'Modificación'}],'short_description':'Carta cred importacion'}],'short_description':'Comercio ext'},{'key':'M006000000000','description':'Créditos','type':'BOTH','services':[{'key':'M006001000000','description':'Créditos Comerciales','type':'BOTH','services':[{'key':'S006001001000','description':'Resumen Créditos','type':'NO_MONEY','services':[],'short_description':'Resumen Créditos'},{'key':'S006001002000','description':'Cuadro de Pagos','type':'NO_MONEY','services':[],'short_description':'Cuadro Pagos'},{'key':'S006001003000','description':'Cupón de Pago por Caja','type':'NO_MONEY','services':[],'short_description':'Cupón pago por caja'},{'key':'S006001004000','description':'Pago Cuota','type':'MONEY','services':[],'short_description':'Pago Cuota'}],'short_description':'Créditos Comerciales'},{'key':'M006002000000','description':'Créditos Hipotecarios','type':'NO_MONEY','services':[{'key':'S006002001000','description':'Resumen Créditos','type':'NO_MONEY','services':[],'short_description':'Resumen Cred'},{'key':'S006002002000','description':'Cupón de Pago por Caja','type':'NO_MONEY','services':[],'short_description':'Cupón Pago por caja'}],'short_description':'Cred hipotecarios'}],'short_description':'Créditos'},{'key':'M007000000000','description':'Inversiones','type':'BOTH','services':[{'key':'M007001000000','description':'Depósitos a Plazo','type':'BOTH','services':[{'key':'S007001001000','description':'Invertir','type':'MONEY','services':[],'short_description':'Invertir'},{'key':'S007001002000','description':'Cancelar','type':'MONEY','services':[],'short_description':'Cancelar'},{'key':'S007001003000','description':'Consultas','type':'NO_MONEY','services':[],'short_description':'Consultas'}],'short_description':'Dep a plazo'},{'key':'M007002000000','description':'Fondos Mutuos','type':'BOTH','services':[{'key':'S007002001000','description':'Toma de Fondos Mutuos','type':'MONEY','services':[],'short_description':'Toma fondos mutuos'},{'key':'S007002002000','description':'Rescate de Fondos Mutuos','type':'MONEY','services':[],'short_description':'Rescate fondos mutuos'},{'key':'S007002003000','description':'Cartola','type':'NO_MONEY','services':[],'short_description':'Cartola'},{'key':'S007002004000','description':'Saldos por Cuenta','type':'NO_MONEY','services':[],'short_description':'Saldos por ctas'},{'key':'S007002005000','description':'Registro de Partícipes','type':'NO_MONEY','services':[],'short_description':'Registro Partícipes'},{'key':'S007002006000','description':'Consultas','type':'NO_MONEY','services':[],'short_description':'Consultas'}],'short_description':'Fondos Mutuos'}],'short_description':'Inversiones'},{'key':'M008000000000','description':'Boletas de Garantía','type':'BOTH','services':[{'key':'S008001000000','description':'Consulta','type':'NO_MONEY','services':[],'short_description':'Consulta'}],'short_description':'Bol garantia'},{'key':'M009000000000','description':'Otros Servicios','type':'BOTH','services':[{'key':'S009001000000','description':'Certificados','type':'NO_MONEY','services':[],'short_description':'Certificados'},{'key':'S009002000000','description':'Documentos Electrónicos','type':'NO_MONEY','services':[],'short_description':'Doc Electrónicos'}],'short_description':'Otros Servicios'}],'token':'eyJhbGciOiJIUzI1NiJ9.eyJjdXN0b21lcklEIjoiNzA5NDYzMDAtNCIsImN1c3RvbWVyTmFtZSI6IkNPUlAgQ1VMVFVSQUwgREUgTEEgSUxVU1RSRSBNVU5JQyBERSBTQSIsInJvb3RDdXN0b21lcklEIjoiNzA5NDYzMDAtNCIsInJvb3RDdXN0b21lck5hbWUiOiJDT1JQIENVTFRVUkFMIERFIExBIElMVVNUUkUgTVVOSUMgREUgU0EiLCJ1c2VySUQiOiI3MDk0NjMwMC00IiwidXNlck5hbWUiOiJVU0VSIiwiZXhwaXJhdGlvbiI6MTU1MjkyMjA5OSwicHJvZHVjdHMiOltdLCJzZXNzaW9uSUQiOiI2NjQ3MDU1Zi1lZTYwLTRkIn0.qH7mLVI2gYJSOyps7g77HdvVYPYbqwnmzBxRiGCJcCQ','auth':'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoiNzA5NDYzMDA0IiwicHJvZmlsZSI6IkFETUlOIiwibmFtZSI6IlVTRVIiLCJleHAiOjE1NTI5MjIzMDgsImVudGVycHJpc2VfaWQiOiI3MDk0NjMwMDQiLCJob2xkaW5nX2lkIjoiNzA5NDYzMDA0In0.1iS6VXLaYuyYxs1d9SO3JnvqdfwdR4WiapcPKdUek0A','admin':false,'new_portal':true,'reset_required':false,'load':false,'error':false,'enterprise':{'key':'709463004','name':'CORP CULTURAL DE LA ILUSTRE MUNIC DE SA','segment':{'key':'999','label':'Sin Asignar'},'agents':[{'key':'0304','name':'CLAUDIO ALEXIS MEZA CACERES','position':{'key':'COMMERCIAL_EXECUTIVE','label':'EJECUTIVO COMERCIAL'},'phone':{'value':26926256,'area_code':'+56'}},{'key':'111111','name':'SIN ASIGNAR','position':{'key':'CASH_EXECUTIVE','label':'EJECUTIVO CASH'}},{'key':'222222','name':'SIN ASIGNAR','position':{'key':'COMMERCIAL_ASSISTANT','label':'ASISTENTE EJECUTIVO'}}],'created':'2019-02-27T19:42:58.023'},'filials':[{'key':'719122000','name':'UNIVERSIDAD CATOLICA CARDENAL RAUL SILVA HENR','segment':{'key':'999','label':'Sin Asignar'},'agents':[{'key':'0328','name':'OSCAR ALEJANDRO PUSCHEL GLAUER','position':{'key':'COMMERCIAL_EXECUTIVE','label':'EJECUTIVO COMERCIAL'},'phone':{'value':26926249,'area_code':'+56'}},{'key':'111111','name':'SIN ASIGNAR','position':{'key':'CASH_EXECUTIVE','label':'EJECUTIVO CASH'}},{'key':'222222','name':'SIN ASIGNAR','position':{'key':'COMMERCIAL_ASSISTANT','label':'ASISTENTE EJECUTIVO'}}],'created':'2019-02-27T19:59:53.410'},{'key':'703601006','name':'ASOCIACION CHILENA DE SEGURIDAD','segment':{'key':'999','label':'Sin Asignar'},'agents':[{'key':'6358','name':'VIVIAN MELNICK SAFAN','position':{'key':'COMMERCIAL_EXECUTIVE','label':'EJECUTIVO COMERCIAL'},'phone':{'value':0,'area_code':'+56'}},{'key':'111111','name':'SIN ASIGNAR','position':{'key':'CASH_EXECUTIVE','label':'EJECUTIVO CASH'}},{'key':'222222','name':'SIN ASIGNAR','position':{'key':'COMMERCIAL_ASSISTANT','label':'ASISTENTE EJECUTIVO'}}],'created':'2019-02-27T20:01:31.683'}],'user':{'key':'709463004','created':'2019-02-27T19:44:05.380','status':'ACTIVADO','contact_info':{'name':'USER','emails':[{'main':true,'value':'email@company.cl'}],'father_lastname':'CORPORACION','mother_lastname':'CULTURAL'},'is_admin':true},'indicators':[{'trend':'none','Name':'UF','Value':'27.565,76'},{'trend':'up','Name':'UTM','Value':'48.353,00'},{'trend':'down','Name':'IPC Mensual','Value':'0,00'},{'trend':'up','Name':'IPSA','Value':'5.332,75'},{'trend':'none','Name':'Dolar Observado','Value':'669,39'},{'trend':'up','Name':'EUR/USD','Value':'1,1347'}],'today':'Mon 18 March, 2019'};

/**
 * Call windows session shared or the session default.
 */
const getSession = () => {
	const session = localStorage.getItem(SESSION_VAR) ? JSON.parse(localStorage.getItem(SESSION_VAR)) : SESSION_DEFAULT;
	return session;
};

const setSession = (key, value) => {
	return new Promise((resolve, reject) => {
		try {
			let objSession = getSession();
			objSession[key] = value;
			localStorage.setItem(SESSION_VAR, JSON.stringify(objSession));
			resolve( );
		} catch(err){
			reject('no es posible guardar la session');
		}
	});
};

const setEnterprise = (rut) => {
	return new Promise((resolve, reject) => {
		try {
			let objSession = getSession();
			objSession.current_enterprise.key = rut;
			localStorage.setItem(SESSION_VAR, JSON.stringify(objSession));
			resolve( );
		} catch(err){
			reject('no es posible guardar la session');
		}
	});
};
/**
 * Call service of Login
 *
 * @version        1.0.0 - 20 Aug 2018
 * @author         Claudio Rojas - claudio.rojas_ex@scotiabank.cl (Imagemaker)
 * @author         Jorge Romero - Jorge.Romero_ex@scotiabank.cl (Imagemaker)
 * @since          0.1.0 - 20 Aug 2018
 *
 */
export default { getSession, setSession, setEnterprise };
